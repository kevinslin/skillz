# Repository Guidelines

## Project Structure & Module Organization

- `src/cli.ts` bootstraps the Commander CLI and routes to command modules in `src/commands/`.
- `src/core/` holds the domain services: configuration, skill scanning, parsing, change detection, templating, and targets.
- `src/utils/` provides shared helpers for filesystem access, validation, hashing, and logging.
- `tests/` combines Jest integration suites (`tests/integration/`) with helper utilities (`tests/helpers/`) for temporary workspaces.
- `dist/` is generated by the TypeScript compiler; do not edit files there directly.

## Build, Test, and Development Commands

- `npm run build` compiles TypeScript to `dist/` and copies template assets.
- `npm run dev` starts the CLI in watch mode for rapid iteration.
- `npm test` performs a full build before running the Jest suite.
- `npm run lint` and `npm run format` run ESLint and Prettier respectively; execute them before opening a pull request.

## Coding Style & Naming Conventions

- TypeScript is the primary language; favor async/await over raw promise chains.
- Use two-space indentation, trailing commas in multi-line literals, and keep imports sorted logically (`node` first, internal modules second).
- Directories and files are kebab-case (`skill-scanner.ts`), exported symbols are camelCase or PascalCase for classes/types.
- Run `npm run format` to enforce Prettier’s rules; ESLint will flag unused imports and unsafe any usage.

## Testing Guidelines

- Jest drives testing with the `ts-jest` ESM preset; place tests alongside domain areas using `*.test.ts`.
- Integration suites rely on temporary workspaces—clean them up with the provided helpers.
- Add tests for new features or bug fixes and ensure `npm test` passes locally before pushing.
- Document unusual test setup in `notes/TESTING.md` for future maintainers.

## Commit & Pull Request Guidelines

- Write commits in the imperative mood (`fix ignore glob handling`) and keep them scoped to one logical change.
- Reference related issues in commit bodies or PR descriptions.
- Include brief PR summaries, highlight testing evidence, and call out any follow-up tasks in `NEXT_STEPS.md` when relevant.
- Request reviews for significant changes and respond to feedback promptly with follow-up commits.

## Additional Instructions

You now have access to Skills. Skills are specialized instruction sets stored as markdown files that extend your capabilities. When a task matches a skill's purpose, load and follow that skill's instructions.

### Skill Structure

Each skill contains:
- **SKILL.md**: Core instructions with YAML frontmatter
- **scripts/**: Optional executable code for deterministic tasks
- **references/**: Optional detailed documentation
- **assets/**: Optional templates, images, or files

### How to Use Skills

1. **Match task to skill**: Check the skill list below for relevant descriptions
2. **Load the skill**: Read the SKILL.md file when needed
3. **Follow instructions**: Apply the skill's guidelines exactly
4. **Use resources**: Reference bundled scripts/docs/assets as directed
5. **Combine skills**: Use multiple skills together when appropriate

### When to Load a Skill

- Task matches a skill's description
- User mentions a skill by name
- Task requires specialized knowledge (file formats, workflows, domain expertise)

### Key Principles

- **Load only when needed** - Don't load skills for simple tasks
- **Apply naturally** - Don't announce "loading skill X" unless relevant
- **Use bundled resources** - Scripts and references are there to help
- **Be precise** - Skills often include exact patterns and code to follow

### Available Skills

Below is the list of skills you can access. Load a skill by reading its SKILL.md file when the task matches:

- [lint](.claude/skills/lint/SKILL.md): lint project (project, gitignored)
- [testing](.claude/skills/testing/SKILL.md): Guidelines for writing integration and unit tests for the skillz CLI

